M5StackLiteを使ったWifiリモートキーヤーのソースコードになります。
Ver1.01
・ESP32ダイレクト送信モード対応
・起動時にプロファイルを選択
初期動作時にWi-Fiプロファイルを選択するようになりました。
サーバー/クライアントともにプロファイルに色付けしてありますので、M5Stackの本体ボタンでプロファイルを選択してください。
ダイレクト通信は三番目の定義です(黄色)
他の定義が不要な場合は、１番目、２番目の定義を削除すると使いやすいと思います(定義間のカンマの消し忘れにご注意ください)。
当バージョンは、サーバーを3秒以上先に起動させる必要があります。
クライアントを先に起動させた再起動がかかり、再度プロファイル選択が必要になります。


--
・ソフトウェアについて
コンパイルはVisual Studio Code +PlatformIOで行ってください。
サーバー用、クライアント用のそれぞれのプロジェクトを作成し、それぞれのsrc/main.cppに添付したtxtファイルをコピーしてください。
ServerProfile/WifiProfilesを各自の動作環境に合わせてください(ダイレクト通信プロファイル含む)。
platform.iniは添付のものを使ってください。

本家のリモートキーヤーキット for Arduino UNO R3の母艦にArdunio R4 UNO Wifiとのソフトウェア互換性はありませんので、本家クライアント/サーバーとの
通信はできません。
--
配線は配線フォルダのJPGファイルをご参照ください。
2025/12/03
※回り込み耐性向上のために、クライアントの回路をバージョンアップしました。

必要な電子部品
ATOM Lite	　　　　2
ATOMICプロキット	2
フォトカプラPC817	2
丸ピンICソケット(4P)	2
ステレオジャックMJ-8435	2
抵抗100Ω　　	　　　　3
フェライトビーズ        2